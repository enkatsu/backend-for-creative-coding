# Chap. 06

## getAllLines()

### Formatting with JavaScript

```sql
select lines.id as 'line_id', points.id as 'point_id', points.x as 'x', points.y as 'y'
from lines 
inner join points on lines.id = points.line_id;
```

| line_id | point_id | x     | y     | 
| ------- | -------- | ----- | ----- | 
| 1       | 1        | 433.0 | 160.0 | 
| 1       | 2        | 430.0 | 172.0 | 
| 1       | 3        | 433.0 | 185.0 | 
| 1       | 4        | 443.0 | 191.0 | 
| 1       | 5        | 460.0 | 197.0 | 
| 1       | 6        | 481.0 | 205.0 | 
| 1       | 7        | 499.0 | 212.0 | 
| 1       | 8        | 511.0 | 219.0 | 
| 1       | 9        | 522.0 | 231.0 | 
| 1       | 10       | 522.0 | 244.0 | 
| 1       | 11       | 515.0 | 254.0 | 
| 2       | 12       | 171.0 | 279.0 | 
| 2       | 13       | 158.0 | 279.0 | 
| 2       | 14       | 143.0 | 279.0 | 
| 2       | 15       | 133.0 | 280.0 | 
| 2       | 16       | 137.0 | 295.0 | 
| 2       | 17       | 142.0 | 306.0 | 
| 2       | 18       | 145.0 | 318.0 | 
| 2       | 19       | 146.0 | 331.0 | 
| 2       | 20       | 134.0 | 333.0 | 
| 2       | 21       | 115.0 | 323.0 | 
| 2       | 22       | 105.0 | 315.0 | 

### Formatting with SQLite

```sql
select json_object(
  'id', lines.id,
  "points", json_group_array(
    json_object('id', points.id, 'x', points.x, 'y', points.y)
  )
) line 
from lines 
inner join points on lines.id = points.line_id 
group by lines.id;
```

| line                                                                                                                                                                                                                                                                                                                                                          | 
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | 
| {"id":1,"points":[{"id":1,"x":433.0,"y":160.0},{"id":2,"x":430.0,"y":172.0},{"id":3,"x":433.0,"y":185.0},{"id":4,"x":443.0,"y":191.0},{"id":5,"x":460.0,"y":197.0},{"id":6,"x":481.0,"y":205.0},{"id":7,"x":499.0,"y":212.0},{"id":8,"x":511.0,"y":219.0},{"id":9,"x":522.0,"y":231.0},{"id":10,"x":522.0,"y":244.0},{"id":11,"x":515.0,"y":254.0}]}          | 
| {"id":2,"points":[{"id":12,"x":171.0,"y":279.0},{"id":13,"x":158.0,"y":279.0},{"id":14,"x":143.0,"y":279.0},{"id":15,"x":133.0,"y":280.0},{"id":16,"x":137.0,"y":295.0},{"id":17,"x":142.0,"y":306.0},{"id":18,"x":145.0,"y":318.0},{"id":19,"x":146.0,"y":331.0},{"id":20,"x":134.0,"y":333.0},{"id":21,"x":115.0,"y":323.0},{"id":22,"x":105.0,"y":315.0}]} | 
